<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="css/mirador-combined.min.css">
    <title>Mirador Viewer</title>
    <style type="text/css">
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script src="mirador.min.js"></script>
    <script type="text/javascript">

     $(function() {
       // adding some code to take manifest url from qsp
       
	    $.urlParam = function(name, url) {
			if (!url) {
			 url = window.location.href;
			}
			var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(url);
			if (!results) { 
				return undefined;
			}
			return results[1] || undefined;
			 }
			var pid = $.urlParam('dps_pid');
		  var host = $.urlParam('host')
		  var manifest = 'http://' + host + '/delivery/iiif/presentation/2.1/' + pid + '/manifest';
	
		// end
			 
       myMiradorInstance = Mirador({
         "id": "viewer",
         "layout": "1x1",
         "data": [           
           { "manifestUri": manifest}
         ],
         "windowObjects": [{
			loadedManifest: manifest,
			viewType: "ImageView"
				}],
         "annotationEndpoint": { "name":"Local Storage", "module": "LocalStorageEndpoint" }
       });
     });
    </script>
  </body>
</html>
